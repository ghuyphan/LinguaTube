@if (isOpen()) {
<div class="sheet-overlay" [class.closing]="isClosing()" (click)="onBackdropClick($event)"
    (touchend)="onBackdropTouch($event)">
    <div class="sheet" #sheetEl [class.closing]="isClosing() && !isDragClosing()" [class.drag-closing]="isDragClosing()"
        [class.dragging]="isDragging()" [class.animated]="hasAnimated()" [class.desktop-modal]="!isMobile"
        [style.maxHeight]="maxHeight()" (click)="$event.stopPropagation()" (animationend)="onAnimationEnd($event)"
        (touchstart)="onTouchStart($event)" (touchmove)="onTouchMove($event)" (touchend)="onTouchEnd($event)">
        <!-- Drag Handle - visible on mobile -->
        @if (showDragHandle()) {
        <div class="sheet-drag-handle">
            <div class="sheet-drag-indicator"></div>
        </div>
        }

        <!-- Close Button -->
        @if (showCloseButton()) {
        <button class="sheet-close-btn" (click)="close()" type="button" aria-label="Close">
            <app-icon name="x" [size]="20" />
        </button>
        }

        <!-- Content projection -->
        <div class="sheet-content" #sheetContent>
            <ng-content />
        </div>
    </div>
</div>
}