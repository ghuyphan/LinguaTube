<app-bottom-sheet [isOpen]="isOpen()" [showCloseButton]="true" [navPadding]="true" (closed)="closed.emit()">
    <div class="quick-view">
        <div class="quick-view-header">
            <h2>{{ i18n.t('study.recentlyAdded') }}</h2>
            <span class="count-badge">{{ recentWords().length }}</span>
        </div>

        @if (recentWords().length === 0) {
        <div class="empty-state">
            <div class="empty-state__icon-box">
                <app-icon name="bookmark" [size]="20" />
            </div>
            <div class="empty-state__text">
                <p class="empty-state__title">{{ i18n.t('vocab.noWordsSaved') }}</p>
                <p class="empty-state__description">{{ i18n.t('study.tapWordsHint') }}</p>
            </div>
        </div>
        } @else {
        <ul class="word-list">
            @for (word of recentWords(); track word.id) {
            <li class="word-item">
                <div class="word-main">
                    <span class="word-surface" [class]="'text-' + word.language">
                        {{ word.word }}
                    </span>
                    @if (word.reading || word.pinyin || word.romanization) {
                    <span class="word-reading">
                        {{ word.reading || word.pinyin || word.romanization }}
                    </span>
                    }
                </div>
                <div class="word-meaning">{{ word.meaning }}</div>
                <div class="word-meta">
                    <button class="level-badge" [class]="'level--' + word.level" (click)="openLevelPicker(word.id)">
                        <span class="level-dot"></span>
                        <span class="level-text">{{ word.level }}</span>
                    </button>
                </div>
            </li>
            }
        </ul>
        }
    </div>
</app-bottom-sheet>

<!-- Level Picker -->
<app-option-picker [options]="levelOptions()" [value]="getEditingItemLevel()" [isOpen]="levelPickerOpen()"
    [title]="i18n.t('vocab.changeLevel')" (selected)="onLevelChange($event)"
    (closed)="levelPickerOpen.set(false); editingItemId.set(null)" />